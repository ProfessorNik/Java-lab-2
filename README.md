# Java-lab-2
Стековый калькулятор.

## 1. Цель проекта
Написать стековый калькулятор, который принимает в качестве аргумента командой
строки имя файла, содержащего команды. Если аргумента нет, то использовать
стандартный поток ввода для чтения команд.

## 2. Описание системы

Система состоит из следующих фунциональных блоков:
1. Парсер командной строки
2. Считыватель команд
3. Парсер команд
4. Исполнитель команд
5. Стек команд

### 2.1. Парсер командной строки

Нужно дать возможность пользователю вводить команды либо с терминала либо с файла.
Если пользователь первым аргументом подал имя файла, то считывание будет производиться с файла, 
иначе ввод будет производиться с терминала.

### 2.2. Считыватель команд

В зависимости от того какой режим ввода команд вбрал пользователь, данный функциональный блок
либо считывает со терминала(до символа окончания ввода '.') построчно, либо читает файл по строчно.
!!Если файла с поданным именем не существует парсер выкидывает _exception_. 

Если встречается комментарий вида: "**#** строка с комментарием. Не запоминается в стек.",
то он его пропускает.

### 2.3. Парсер команд

Пользуясь считываетелем команд, парсит файл и создает стек команд и их аргументов, при не соответствии команд
и аргументво выбрасывается _exception_.

Парсер должен использовать фабрику, при создании стека команд.

### 2.4. Исполнитель команд

Имеет в себе стек команд и стек, хранящий в себе числа и константы. Используя стек чисел и констант, а также контекст исполения, исполнитель
команд берет команды из стека команд и исполняет их, при наличии ошибок в логике команд выкидывает _runtime exception_. Также исполение каждой 
команды **логируется** 

### 2.5. Стек команд

Содержит в себе команды, описанные в **3** пункте.
При выполении некоторых операций в стеке может не оказаться нужного числа параметров, тогда выбрасывается _exception_

### 2.6. Стек чисел и констант

Стек может содержать в себе один из `StackUnit`ов:
1. Число
2. Константа, объявляемая DEFINE и содержащаяся в контексте исполения

### 2.7. Контекст исполения

Содержит в себе таблицу констант и их значений, также содержит в себе номер исполняемой строки
и стандартный поток вывода, может по передаваемой в него строке получить нужный 'StackUnit'

## 3. Команды

Путь и ?имя команды? содержится в файле, который можно подключить при помощи команды INCLUDE путь/до/файла

### 3.1 Команды доступные без подключения

1. POP, PUSH - снять/положить число со/на стек(а). (При передачи в PUSH константы, которой не существует выбрасывается exception)
2. PRINT - печать верхнего элемента стека (без удаления).
3. DEFINE - задать значение константы. В дальнейшем везде использовать вместо параметра это значение.(При задачи одной и той же константы 2 раза выбрасывается exception)

### 3.2 Стандартны набор команд `basicmath`

+, -, *, /, SQRT – арифметические операции. Используют один или два верхних элемента стека, изымают их из стека, помещая результат назад

### 3.3 Добавление пользовательского функционала

???Алгоритм в будущем

## 4. Логирование

Дожно быть реализовано логирование внутри каждой команды с обязательным указанием номера исполняемой строки

## 5. Технологии

`Java v.17`
`log4j2`
`java.junit`